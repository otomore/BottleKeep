# BottleKeeper 機能要件リスト

## 優先度説明
- **P0 (必須)**: MVP実装に必要な機能
- **P1 (高)**: ユーザー価値が高く、早期実装が望ましい機能
- **P2 (中)**: 差別化要素となる機能
- **P3 (低)**: 将来的な拡張機能

## コア機能（在庫管理）

### 基本的な在庫管理
- [x] **P0** ボトルの登録（名前、種類、容量） *工数: 2日*
- [x] **P0** 現在の残量を記録（ml単位） *工数: 1日*
- [x] **P0** 残量をパーセンテージで表示 *工数: 0.5日*
- [x] **P1** 残量を視覚的にボトルアイコンで表示 *工数: 1日*
- [x] **P1** 写真撮影・保存機能 *工数: 2日*
- [x] **P2** バーコードスキャンで商品情報自動取得 *工数: 3日, 難易度: 高*
- [x] **P0** 手動での残量更新 *工数: 1日*
- [x] **P1** 飲んだ量の記録（何ml消費したか） *工数: 1日*
- [x] **P1** 開封日の記録 *工数: 0.5日*
- [x] **P0** 購入日の記録 *工数: 0.5日*
- [x] **P1** 購入価格の記録 *工数: 0.5日*
- [x] **P2** 購入店舗の記録 *工数: 0.5日*

### カテゴリー・分類
- [x] ウイスキー、ワイン、日本酒、焼酎など多様な酒類に対応
- [x] ソフトドリンクも管理可能
- [x] カスタムカテゴリーの作成
- [x] ブランド別の分類
- [x] 産地別の分類（スコッチ、バーボン、日本など）
- [x] 価格帯での分類
- [x] お気に入り/レア度の設定

### 在庫確認の利便性
- [x] 検索機能（名前、ブランド、種類）
- [x] フィルター機能（残量、カテゴリー、価格帯）
- [x] ソート機能（名前、残量、購入日、価格）
- [x] 一覧表示とグリッド表示の切り替え
- [x] 在庫なし/残りわずか/潤沢の色分け表示
- [x] クイック在庫確認画面（外出先用シンプル表示）

## 通知・アラート機能

- [x] 残量が少なくなったら通知
- [x] お気に入り銘柄の在庫切れアラート
- [x] 長期間飲んでいないボトルのリマインダー
- [x] 特定の銘柄の購入推奨通知

## データ管理・分析

### 統計・レポート
- [x] 月別/年別の消費量グラフ
- [x] 銘柄別の消費ペース分析
- [x] 購入金額の推移
- [x] よく飲む銘柄ランキング
- [x] 在庫金額の合計表示
- [x] 消費予測（このペースだといつなくなるか）

### データバックアップ
- [x] iCloudバックアップ
- [ ] データのエクスポート（CSV/Excel）
- [ ] データのインポート
- [x] 複数デバイス間での同期

## ソーシャル・共有機能

- [ ] コレクションの共有（SNS投稿用画像生成）
- [x] テイスティングノートの記録
- [ ] 評価（5つ星評価）の記録
- [ ] 飲み比べメモ
- [ ] 友人とのコレクション比較
- [ ] おすすめ銘柄の共有
- [ ] ウィッシュリスト（欲しい銘柄リスト）

## 購入サポート機能

- [x] 価格履歴の記録
- [ ] 最安値アラート
- [ ] 購入場所のマップ表示
- [x] 在庫が少ない銘柄の買い物リスト自動生成
- [ ] レシート撮影での購入記録
- [ ] 予算管理機能

## UI/UX機能

- [x] ダークモード対応
- [ ] ウィジェット対応（ホーム画面で在庫確認）
- [ ] Apple Watch対応
- [ ] Siri対応（「山崎の在庫は？」）
- [ ] 3D Touch/触覚タッチ対応
- [x] iPad最適化（大画面レイアウト）

## 上級者向け機能

- [ ] ワインセラー/ウイスキー棚の場所管理
- [ ] 適正在庫の設定と管理
- [ ] QRコード生成（棚に貼って管理）
- [ ] 複数拠点の在庫管理（自宅/別荘/オフィス）
- [ ] 家族間での在庫共有
- [ ] バーテンダーモード（カクテル材料の在庫確認）

## セキュリティ・プライバシー

- [ ] Face ID/Touch IDでのロック
- [ ] 特定のコレクションを非表示
- [ ] ゲストモード（一部のみ表示）

## その他の便利機能

- [ ] ペアリング提案（料理との相性）
- [ ] 季節のおすすめ表示
- [ ] 新商品情報の表示
- [ ] 近隣酒屋の在庫情報連携
- [ ] オンラインショップ連携
- [ ] ARでボトル情報表示（カメラをかざすと情報表示）

## マネタイズ機能

### 課金モデル
- [x] 無料プラン（基本機能＋制限あり）
- [x] プレミアムプラン（買い切り型、500-1500円想定）
- [x] プレミアムで解放される機能の設定

### 無料プランの制限案
- [x] 登録可能ボトル数の制限（例：20本まで）
- [x] 統計・分析機能の一部制限
- [x] カスタムカテゴリー作成数の制限（例：3個まで）
- [x] バックアップ機能の制限（手動のみ、自動バックアップは有料）
- [x] 詳細な消費予測はプレミアムのみ
- [x] 複数デバイス同期はプレミアムのみ

### 広告
- [x] 無料プランで広告表示
- [x] 一定操作ごとのインタースティシャル広告（例：5回の登録/更新ごと）
- [x] 在庫確認画面下部のバナー広告
- [x] 広告除去はプレミアム購入で対応

### アフィリエイト機能
- [x] 在庫が少なくなった商品のAmazon購入リンク表示
- [x] 商品名から自動的にAmazon検索リンク生成
- [x] 楽天市場アフィリエイトリンクも併用
- [x] 「購入をお勧め」通知にアフィリエイトリンク含める
- [x] おすすめ商品の提案（関連商品のアフィリエイトリンク）

### アフィリエイト実装詳細
- [x] 商品名・メーカー名から自動マッチング
- [x] 複数のECサイトの価格比較表示
- [x] 在庫切れ/残りわずか時に自動表示
- [x] ユーザーの購入履歴から類似商品を提案
- [x] 季節・イベントに合わせた商品提案（例：クリスマス限定ボトル）

### プレミアム機能の訴求
- [x] 無料プランで制限に達した時のアップグレード促進
- [x] 初回起動時の機能比較表表示
- [x] 期間限定セール機能（例：年末年始割引）
- [x] お試し期間（7日間全機能無料）

---

## 開発工数サマリー

### MVP (P0機能のみ)
- 基本的なCRUD操作: 約6日
- Core Data実装: 約2日
- 基本UI実装: 約4日
- **合計**: 約12日

### フェーズ1 (P0 + P1機能)
- P0機能: 12日
- P1機能追加: 約8日
- テスト・デバッグ: 約3日
- **合計**: 約23日

### 技術的リスク評価
- **高リスク**: バーコードスキャン、外部API連携
- **中リスク**: 画像処理、CloudKit同期
- **低リスク**: 基本CRUD、UI実装

### パフォーマンス要件
- **起動時間**: 3秒以内
- **検索応答時間**: 1秒以内
- **同期完了時間**: 10秒以内（100件のボトル）
- **メモリ使用量**: 200MB以下
- **写真読み込み時間**: 2秒以内

### 法的・コンプライアンス要件
- **年齢制限**: アプリは17歳以上対象（App Store）
- **プライバシー**: 写真、位置情報（購入店舗）の明示的な許可取得
- **データ保護**: GDPRコンプライアンス（EU圏ユーザー向け）
- **広告**: アルコール関連商品の広告規制遵守
- **免責事項**: 酒類消費に関する適正な利用促進メッセージ

### 国際化・ローカライゼーション
- **対応言語**: 日本語（第一優先）、英語
- **通貨**: JPY、USD、EUR
- **日付形式**: 各地域の標準形式
- **酒類分類**: 各国の酒類規格対応（日本酒、ウイスキー等）

### 技術的制約
- **iOS最小バージョン**: iOS 16.0+
- **iPadOS最小バージョン**: iPadOS 16.0+
- **CloudKit制限**: 1日あたり1GB転送量上限
- **Core Data**: SQLite 100MB制限考慮
- **写真容量**: 1枚あたり最大10MB

### テスト戦略
- **Unit Test**: 80%以上のコードカバレッジ
- **UI Test**: 主要フロー10シナリオ
- **性能テスト**: 1000件のボトルデータでの動作確認
- **セキュリティテスト**: 生体認証機能の動作確認

*チェックを入れた機能から優先的に実装していきます*